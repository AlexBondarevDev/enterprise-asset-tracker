-- phpMyAdmin SQL Dump
-- version 4.9.5
-- https://www.phpmyadmin.net/
--
-- Хост: localhost:3306
-- Время создания: Апр 05 2022 г., 17:17
-- Версия сервера: 5.7.24
-- Версия PHP: 7.4.1

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET AUTOCOMMIT = 0;
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- База данных: `kbd`
--

DELIMITER $$
--
-- Процедуры
--
CREATE DEFINER=`root`@`localhost` PROCEDURE `GodFinSumm` (IN `dat1` DATE, IN `dat2` DATE)  NO SQL
SELECT SUM(`фин_стоимость`) FROM `ос` WHERE `дата_принятия` BETWEEN dat1 AND dat2$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `OSnaMOL` ()  NO SQL
SELECT CONCAT(`мол`.`ф`,' ',`мол`.`и`,' ',`мол`.`о`), COUNT(`закрепление`.`id_мол`) FROM `мол` INNER JOIN `закрепление` on `мол`.`id_мол`=`закрепление`.`id_мол` GROUP BY CONCAT(`мол`.`ф`,' ',`мол`.`и`,' ',`мол`.`о`)$$

DELIMITER ;

-- --------------------------------------------------------

--
-- Структура таблицы `мол`
--

CREATE TABLE `мол` (
  `id_мол` int(11) NOT NULL,
  `id_должности` int(11) NOT NULL,
  `ф` varchar(30) NOT NULL,
  `и` varchar(30) NOT NULL,
  `о` varchar(30) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Дамп данных таблицы `мол`
--

INSERT INTO `мол` (`id_мол`, `id_должности`, `ф`, `и`, `о`) VALUES
(1, 1, 'Арещенко', 'Татьяна', 'Ивановна'),
(2, 4, 'Карпако', 'Николай', 'Михайловия'),
(4, 3, 'Иванов', 'Дмитрий', 'Николаевич'),
(5, 5, 'Кирилов', 'Иван', 'Павлович');

--
-- Триггеры `мол`
--
DELIMITER $$
CREATE TRIGGER `Перенос_ответственности` BEFORE DELETE ON `мол` FOR EACH ROW UPDATE `закрепление`
	SET `id_мол` = '1'
    	WHERE `закрепление`.`id_мол` = `OLD`.`id_мол`
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Структура таблицы `должности`
--

CREATE TABLE `должности` (
  `id_должности` int(11) NOT NULL,
  `наименование` varchar(30) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Дамп данных таблицы `должности`
--

INSERT INTO `должности` (`id_должности`, `наименование`) VALUES
(1, 'Директор'),
(2, 'Сотрудник общего назначения'),
(3, 'Главный инженер'),
(4, 'Инженер-технолог'),
(5, 'Наладчик оборудования'),
(6, 'Аналитик'),
(7, 'Бухгалтер'),
(8, 'Экономист'),
(9, 'Уборщик');

--
-- Триггеры `должности`
--
DELIMITER $$
CREATE TRIGGER `Перенос_должности` BEFORE DELETE ON `должности` FOR EACH ROW UPDATE `мол`
	SET `id_должности` = '2'
    	WHERE `мол`.`id_должности` = `OLD`.`id_должности`
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Структура таблицы `коддоступа`
--

CREATE TABLE `коддоступа` (
  `id_коддоступа` int(11) NOT NULL,
  `коддоступа` varchar(30) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Дамп данных таблицы `коддоступа`
--

INSERT INTO `коддоступа` (`id_коддоступа`, `коддоступа`) VALUES
(1, '1234');

-- --------------------------------------------------------

--
-- Структура таблицы `причины`
--

CREATE TABLE `причины` (
  `id_причины` int(11) NOT NULL,
  `наименование` varchar(150) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Дамп данных таблицы `причины`
--

INSERT INTO `причины` (`id_причины`, `наименование`) VALUES
(1, 'Преждевременный износ'),
(2, 'Окончание СПИ'),
(3, 'Моральное устаревание'),
(4, 'Технологическое устаревание'),
(5, 'Передача или продажа');

--
-- Триггеры `причины`
--
DELIMITER $$
CREATE TRIGGER `Перенос_причины_два` BEFORE DELETE ON `причины` FOR EACH ROW UPDATE `списание`
	SET `id_причины` = '1'
    	WHERE `списание`.`id_причины` = `OLD`.`id_причины`
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Структура таблицы `авторизация`
--

CREATE TABLE `авторизация` (
  `id_эко` int(11) NOT NULL,
  `fio` varchar(100) NOT NULL,
  `password` varchar(10) NOT NULL,
  `admin` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Дамп данных таблицы `авторизация`
--

INSERT INTO `авторизация` (`id_эко`, `fio`, `password`, `admin`) VALUES
(1, 'Бондарев Александр Андреевич', '1111', 1),
(2, 'Иваненко Жанна Викторовна', '1111', 1),
(4, 'Юрченко Инга Ивановна', '1111', 0);

-- --------------------------------------------------------

--
-- Структура таблицы `вид_ос`
--

CREATE TABLE `вид_ос` (
  `id_вида_ос` int(11) NOT NULL,
  `наименование` varchar(50) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Дамп данных таблицы `вид_ос`
--

INSERT INTO `вид_ос` (`id_вида_ос`, `наименование`) VALUES
(1, 'ОС общего назначения'),
(2, 'Производственный инвентарь'),
(3, 'Хозяйственный инвентарь'),
(4, 'Передаточные устройства'),
(5, 'Транспортные средства'),
(6, 'Машины и оборудование');

--
-- Триггеры `вид_ос`
--
DELIMITER $$
CREATE TRIGGER `Перенос_вида` BEFORE DELETE ON `вид_ос` FOR EACH ROW UPDATE `ос`
	SET `id_вида_ос` = '1'
    	WHERE `ос`.`id_вида_ос` = `OLD`.`id_вида_ос`
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Структура таблицы `вид_р`
--

CREATE TABLE `вид_р` (
  `id_вида_р` int(11) NOT NULL,
  `наименование` varchar(100) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Дамп данных таблицы `вид_р`
--

INSERT INTO `вид_р` (`id_вида_р`, `наименование`) VALUES
(1, 'Устранение локальной неисправности'),
(3, 'Замена основного узла'),
(4, 'Восстановление лакокрасочного покрытия'),
(5, 'Модернизация комплектующих'),
(6, 'Технологическое улучшение'),
(7, 'Замена опорного аппарата');

--
-- Триггеры `вид_р`
--
DELIMITER $$
CREATE TRIGGER `Перенос_ремонта` BEFORE DELETE ON `вид_р` FOR EACH ROW UPDATE `ремонт`
	SET `id_вида_р` = '1'
    	WHERE `ремонт`.`id_вида_р` = `OLD`.`id_вида_р`
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Структура таблицы `закрепление`
--

CREATE TABLE `закрепление` (
  `id_закреп` int(11) NOT NULL,
  `id_ос` int(11) NOT NULL,
  `id_мол` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Дамп данных таблицы `закрепление`
--

INSERT INTO `закрепление` (`id_закреп`, `id_ос`, `id_мол`) VALUES
(1, 1, 2),
(18, 17, 4),
(21, 20, 1),
(22, 21, 2),
(25, 24, 1),
(27, 26, 2),
(28, 27, 4),
(29, 28, 1),
(31, 30, 2),
(32, 31, 2),
(35, 34, 2),
(36, 35, 1),
(37, 36, 2),
(38, 37, 1),
(39, 38, 2),
(40, 39, 4),
(41, 40, 1),
(42, 41, 1),
(43, 42, 2),
(44, 43, 1),
(45, 44, 4),
(46, 45, 4),
(48, 47, 5),
(49, 48, 1),
(50, 49, 1),
(51, 50, 5),
(52, 51, 1),
(53, 52, 1),
(54, 53, 2),
(55, 54, 1),
(56, 55, 4),
(57, 56, 1),
(58, 57, 4),
(59, 58, 2),
(60, 59, 1),
(61, 60, 2);

-- --------------------------------------------------------

--
-- Структура таблицы `ос`
--

CREATE TABLE `ос` (
  `id_ос` int(11) NOT NULL,
  `ин` int(10) NOT NULL,
  `id_вида_ос` int(11) NOT NULL,
  `дата_принятия` date NOT NULL,
  `пер_стоимость` double NOT NULL,
  `год_сум_а` double NOT NULL,
  `наименование` varchar(150) NOT NULL,
  `норма_ндс` int(11) NOT NULL,
  `спи` int(11) NOT NULL,
  `сумма_ндс` double NOT NULL,
  `фин_стоимость` double NOT NULL,
  `статус` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Дамп данных таблицы `ос`
--

INSERT INTO `ос` (`id_ос`, `ин`, `id_вида_ос`, `дата_принятия`, `пер_стоимость`, `год_сум_а`, `наименование`, `норма_ндс`, `спи`, `сумма_ндс`, `фин_стоимость`, `статус`) VALUES
(1, 105001, 6, '2018-09-14', 10000, 1100, 'Фрезерный станок', 10, 10, 1000, 11000, 1),
(2, 101001, 2, '2017-11-14', 500, 60, 'Сварочный аппарат', 10, 5, 50, 550, 0),
(17, 102222, 2, '2015-02-03', 1335, 304.38, 'Резак', 14, 5, 186.9, 1521.9, 1),
(18, 101221, 1, '2015-02-27', 145, 14.5, 'Набор инструментов', 10, 11, 14.5, 159.5, 0),
(19, 103001, 3, '2015-02-10', 230, 39.43, 'Стальной тросс', 20, 7, 46, 276, 0),
(20, 104645, 4, '2015-03-11', 11489, 880.82, 'Транспортёр', 15, 15, 1723.35, 13212.35, 1),
(21, 103122, 3, '2015-03-03', 420, 46.2, 'Тележка', 10, 10, 42, 462, 1),
(22, 103147, 3, '2015-03-01', 23, 3.61, 'Набор крепежей', 10, 7, 2.3, 25.3, 0),
(23, 103123, 3, '2015-03-22', 150, 6.6, 'Стол компьютерный', 10, 25, 15, 165, 0),
(24, 105002, 5, '2015-04-06', 15260, 1338.18, 'Погрузчик', 14, 13, 2136.4, 17396.4, 1),
(25, 101103, 1, '2015-04-12', 412, 151.07, 'Колёсный вал', 10, 3, 41.2, 453.2, 0),
(26, 102146, 2, '2015-05-08', 19846.23, 2262.47, 'Станок для обработки металла', 14, 10, 2778.47, 22624.7, 1),
(27, 103698, 3, '2015-07-04', 123, 27.06, 'Набор инструментов', 10, 5, 12.3, 135.3, 1),
(28, 105100, 5, '2015-08-17', 18794, 2142.52, 'Автомобиль маз', 14, 10, 2631.16, 21425.16, 1),
(29, 101163, 1, '2015-09-10', 1000, 122.22, 'Компьютер asus', 10, 9, 100, 1100, 0),
(30, 101005, 1, '2016-07-14', 400, 88, 'Принтер samsung', 10, 5, 40, 440, 1),
(31, 101006, 1, '2016-09-21', 365.13, 138.75, 'Сканер aser', 14, 3, 51.12, 416.25, 1),
(32, 103324, 3, '2016-11-24', 41, 4.51, 'Стул металличесский', 10, 10, 4.1, 45.1, 0),
(33, 103148, 3, '2017-03-29', 135, 54, 'Тележка', 20, 3, 27, 162, 0),
(34, 102142, 2, '2017-08-18', 1345, 191.66, 'Электролобзик', 14, 8, 188.3, 1533.3, 1),
(35, 103648, 3, '2017-08-30', 560, 61.6, 'Шкаф', 10, 10, 56, 616, 1),
(36, 103120, 3, '2017-10-05', 13, 4.77, 'Стул кожанный', 10, 3, 1.3, 14.3, 1),
(37, 104145, 4, '2017-10-20', 137, 32.88, 'Сеть компьютерная', 20, 5, 27.4, 164.4, 1),
(38, 106896, 6, '2018-03-02', 15023, 2879.41, 'Малый погрузчик', 15, 6, 2253.45, 17276.45, 1),
(39, 106198, 6, '2018-03-24', 134, 29.48, 'Переносная лампа накаливания', 10, 5, 13.4, 147.4, 1),
(40, 102489, 2, '2018-05-18', 54, 15.39, 'Инструменты', 14, 4, 7.56, 61.56, 1),
(41, 101795, 1, '2018-05-27', 14, 5.13, 'Тумбочка дб', 10, 3, 1.4, 15.4, 1),
(42, 101635, 1, '2018-07-05', 134, 38.19, 'Кресло', 14, 4, 18.76, 152.76, 1),
(43, 104634, 4, '2018-07-27', 478, 109.94, 'Линия связи', 15, 5, 71.7, 549.7, 1),
(44, 102934, 2, '2018-09-19', 875, 192.5, 'Сварочный аппарат', 10, 5, 87.5, 962.5, 1),
(45, 106645, 6, '2018-09-02', 654, 188.02, 'Генератор', 15, 4, 98.1, 752.1, 1),
(46, 101317, 1, '2018-10-11', 54, 21.6, 'Тумбочка дб', 20, 3, 10.8, 64.8, 0),
(47, 106698, 6, '2019-03-13', 810, 230.85, 'Дробитель строительный', 14, 4, 113.4, 923.4, 1),
(48, 104698, 4, '2020-01-08', 10050, 3685, 'Теплопровод', 10, 3, 1005, 11055, 1),
(49, 101431, 1, '2020-02-02', 15000, 1916.67, 'Компьютер lenovo', 15, 9, 2250, 17250, 1),
(50, 101734, 1, '2020-05-14', 14694, 5387.8, 'Ноутбук lenovo', 10, 3, 1469.4, 16163.4, 1),
(51, 101433, 1, '2020-07-24', 320, 91.2, 'Монитор xiomi', 14, 4, 44.8, 364.8, 1),
(52, 103962, 3, '2021-02-11', 132, 37.62, 'Стол компьютерный', 14, 4, 18.48, 150.48, 1),
(53, 103687, 3, '2021-02-07', 470, 135.12, 'Уборочный агрегат', 15, 4, 70.5, 540.5, 1),
(54, 102922, 2, '2021-05-13', 1450, 551, 'Пуливизатор', 14, 3, 203, 1653, 1),
(55, 102444, 2, '2021-07-02', 1539, 423.22, 'Лакокрасочный расспылитель', 10, 4, 153.9, 1692.9, 1),
(56, 103789, 3, '2021-07-23', 312, 118.56, 'Столик для ноутбука', 14, 3, 43.68, 355.68, 1),
(57, 106745, 6, '2021-07-31', 968, 580.8, 'Стационарный телефон', 20, 2, 193.6, 1161.6, 1),
(58, 101741, 1, '2021-09-07', 364, 414.96, 'Звуковая система', 14, 1, 50.96, 414.96, 1),
(59, 103468, 3, '2021-09-10', 3156, 347.16, 'Венчурная система', 10, 10, 315.6, 3471.6, 1),
(60, 102131, 2, '2021-11-30', 1212, 460.56, 'Станок', 14, 3, 169.68, 1381.68, 1);

-- --------------------------------------------------------

--
-- Структура таблицы `ремонт`
--

CREATE TABLE `ремонт` (
  `id_р` int(11) NOT NULL,
  `id_ос` int(11) NOT NULL,
  `id_вида_р` int(11) NOT NULL,
  `дата_начала` date NOT NULL,
  `дата_окончания` date DEFAULT NULL,
  `сум_затрат` double DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Дамп данных таблицы `ремонт`
--

INSERT INTO `ремонт` (`id_р`, `id_ос`, `id_вида_р`, `дата_начала`, `дата_окончания`, `сум_затрат`) VALUES
(1, 1, 4, '2019-09-07', '2019-09-19', 1830.6),
(2, 2, 4, '2021-11-01', '2021-11-03', 1615.78),
(4, 1, 3, '2021-11-01', '2021-11-20', 1830.6),
(5, 20, 1, '2016-04-14', '2016-05-06', 47),
(6, 21, 4, '2018-06-06', '2018-06-08', 47),
(7, 26, 6, '2017-05-05', NULL, NULL),
(8, 28, 7, '2017-05-20', NULL, NULL),
(9, 38, 5, '2020-01-16', NULL, NULL);

-- --------------------------------------------------------

--
-- Структура таблицы `списание`
--

CREATE TABLE `списание` (
  `id_спис` int(11) NOT NULL,
  `id_ос` int(11) NOT NULL,
  `id_причины` int(11) NOT NULL,
  `дата_списания` date NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Дамп данных таблицы `списание`
--

INSERT INTO `списание` (`id_спис`, `id_ос`, `id_причины`, `дата_списания`) VALUES
(1, 2, 1, '2021-11-22'),
(2, 23, 1, '2017-06-22'),
(3, 29, 3, '2017-06-03'),
(4, 19, 5, '2020-03-05'),
(5, 32, 2, '2020-05-22'),
(6, 25, 2, '2021-03-05'),
(7, 33, 1, '2021-04-23'),
(8, 22, 1, '2019-02-07'),
(9, 46, 4, '2018-10-25'),
(10, 18, 5, '2021-02-26');

--
-- Индексы сохранённых таблиц
--

--
-- Индексы таблицы `мол`
--
ALTER TABLE `мол`
  ADD PRIMARY KEY (`id_мол`),
  ADD KEY `id_мол` (`id_мол`),
  ADD KEY `id_должности` (`id_должности`);

--
-- Индексы таблицы `должности`
--
ALTER TABLE `должности`
  ADD PRIMARY KEY (`id_должности`),
  ADD KEY `id_должности` (`id_должности`);

--
-- Индексы таблицы `коддоступа`
--
ALTER TABLE `коддоступа`
  ADD PRIMARY KEY (`id_коддоступа`),
  ADD KEY `id_коддоступа` (`id_коддоступа`);

--
-- Индексы таблицы `причины`
--
ALTER TABLE `причины`
  ADD PRIMARY KEY (`id_причины`),
  ADD KEY `id_причины` (`id_причины`);

--
-- Индексы таблицы `авторизация`
--
ALTER TABLE `авторизация`
  ADD PRIMARY KEY (`id_эко`),
  ADD KEY `id_эко` (`id_эко`);

--
-- Индексы таблицы `вид_ос`
--
ALTER TABLE `вид_ос`
  ADD PRIMARY KEY (`id_вида_ос`),
  ADD KEY `id_вида_ос` (`id_вида_ос`);

--
-- Индексы таблицы `вид_р`
--
ALTER TABLE `вид_р`
  ADD PRIMARY KEY (`id_вида_р`),
  ADD KEY `id_вида_р` (`id_вида_р`);

--
-- Индексы таблицы `закрепление`
--
ALTER TABLE `закрепление`
  ADD PRIMARY KEY (`id_закреп`),
  ADD KEY `id_закреп` (`id_закреп`),
  ADD KEY `id_ос` (`id_ос`),
  ADD KEY `закрепление_ibfk_2` (`id_мол`);

--
-- Индексы таблицы `ос`
--
ALTER TABLE `ос`
  ADD PRIMARY KEY (`id_ос`),
  ADD KEY `id_ос` (`id_ос`),
  ADD KEY `id_вида_ос` (`id_вида_ос`);

--
-- Индексы таблицы `ремонт`
--
ALTER TABLE `ремонт`
  ADD PRIMARY KEY (`id_р`),
  ADD KEY `id_р` (`id_р`),
  ADD KEY `id_ос` (`id_ос`),
  ADD KEY `ремонт_ibfk_2` (`id_вида_р`);

--
-- Индексы таблицы `списание`
--
ALTER TABLE `списание`
  ADD PRIMARY KEY (`id_спис`),
  ADD KEY `id_спис` (`id_спис`),
  ADD KEY `id_ос` (`id_ос`),
  ADD KEY `списание_ibfk_2` (`id_причины`);

--
-- AUTO_INCREMENT для сохранённых таблиц
--

--
-- AUTO_INCREMENT для таблицы `мол`
--
ALTER TABLE `мол`
  MODIFY `id_мол` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=6;

--
-- AUTO_INCREMENT для таблицы `должности`
--
ALTER TABLE `должности`
  MODIFY `id_должности` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=10;

--
-- AUTO_INCREMENT для таблицы `коддоступа`
--
ALTER TABLE `коддоступа`
  MODIFY `id_коддоступа` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT для таблицы `причины`
--
ALTER TABLE `причины`
  MODIFY `id_причины` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=6;

--
-- AUTO_INCREMENT для таблицы `авторизация`
--
ALTER TABLE `авторизация`
  MODIFY `id_эко` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=5;

--
-- AUTO_INCREMENT для таблицы `вид_ос`
--
ALTER TABLE `вид_ос`
  MODIFY `id_вида_ос` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=7;

--
-- AUTO_INCREMENT для таблицы `вид_р`
--
ALTER TABLE `вид_р`
  MODIFY `id_вида_р` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=8;

--
-- AUTO_INCREMENT для таблицы `закрепление`
--
ALTER TABLE `закрепление`
  MODIFY `id_закреп` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=62;

--
-- AUTO_INCREMENT для таблицы `ос`
--
ALTER TABLE `ос`
  MODIFY `id_ос` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=61;

--
-- AUTO_INCREMENT для таблицы `ремонт`
--
ALTER TABLE `ремонт`
  MODIFY `id_р` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=10;

--
-- AUTO_INCREMENT для таблицы `списание`
--
ALTER TABLE `списание`
  MODIFY `id_спис` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=11;

--
-- Ограничения внешнего ключа сохраненных таблиц
--

--
-- Ограничения внешнего ключа таблицы `мол`
--
ALTER TABLE `мол`
  ADD CONSTRAINT `мол_ibfk_1` FOREIGN KEY (`id_должности`) REFERENCES `должности` (`id_должности`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Ограничения внешнего ключа таблицы `закрепление`
--
ALTER TABLE `закрепление`
  ADD CONSTRAINT `закрепление_ibfk_1` FOREIGN KEY (`id_ос`) REFERENCES `ос` (`id_ос`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `закрепление_ibfk_2` FOREIGN KEY (`id_мол`) REFERENCES `мол` (`id_мол`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Ограничения внешнего ключа таблицы `ос`
--
ALTER TABLE `ос`
  ADD CONSTRAINT `ос_ibfk_1` FOREIGN KEY (`id_вида_ос`) REFERENCES `вид_ос` (`id_вида_ос`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Ограничения внешнего ключа таблицы `ремонт`
--
ALTER TABLE `ремонт`
  ADD CONSTRAINT `ремонт_ibfk_1` FOREIGN KEY (`id_ос`) REFERENCES `ос` (`id_ос`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `ремонт_ibfk_2` FOREIGN KEY (`id_вида_р`) REFERENCES `вид_р` (`id_вида_р`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Ограничения внешнего ключа таблицы `списание`
--
ALTER TABLE `списание`
  ADD CONSTRAINT `списание_ibfk_1` FOREIGN KEY (`id_ос`) REFERENCES `ос` (`id_ос`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `списание_ibfk_2` FOREIGN KEY (`id_причины`) REFERENCES `причины` (`id_причины`) ON DELETE CASCADE ON UPDATE CASCADE;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
